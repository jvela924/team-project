<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="MyApp">
<head>
  <meta charset="utf-8">
  <title></title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.min.js"></script>
  <script src="/js/app.js" charset="utf-8"></script>
  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
</head>
  <body ng-controller="disqoverController as disq">
    <header>
      <div class="vimeo-wrapper">
        <iframe
        src="https://player.vimeo.com/video/120717482?background=1&autoplay=1&loop=1&byline=0&title=0"
        frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
        </iframe>
      </div>
      <a href="/">Dis<span class="red">q</span>over</a>
    </header>
    <nav>
      <div class="create">
        <div ng-if="disq.loggedInUsername">
          <h1>Welcome, {{disq.loggedInUsername}}</h1>
          <!--SPOTIFY LOGIN AREA -->
          <div class="spotifyArea">
            <div id="spotifyLogin">
              <h1>Log in to Spotify</h1>
              <a href="/login"><button id="spotLoginBtn">Log In</button></a>
            </div>
            <div id="spotLoggedIn">
            </div>
          </div>
          <script id="loggedin-template" type="text/x-handlebars-template">
            <h1>Logged in as </h1>
            <img id="avatar" width="200" src="" />
            <dl>
              <dt>Display name</dt><dd></dd>
              <dt>Username</dt><dd></dd>
              <dt>Email</dt><dd></dd>
              <dt>Spotify URI</dt><dd><a href=""></a></dd>
              <dt>Link</d><dd><a href=""></a></dd>
              <dt>Profile Image</dt><dd></dd>
            </dl>
            <p><a href="/"><button>Log in again</button></a></p>
          </script>
          <!-- END SPOTIFY LOGIN AREA -->
        </div>
          <div ng-if="!disq.loggedInUsername">
        <h2>Log In or Sign Up</h2>
        <input type="text" ng-model="disq.username" placeholder="Username" />
        <input type="password" ng-model="disq.password" placeholder="Password"/>
        <form ng-submit="disq.createUser()">
          <input class="button" type="submit" value="Create User">
        </form>
        <form ng-submit="disq.logIn()">
            <input class="button" type="submit" value="Log In">
        </form>
      </div>
        <div class="logout">
      <div ng-if="disq.loggedInUsername">
          <form ng-submit="disq.logOut()">
          <input class="button" type="submit" value="Logout"/>
          </form>
      </div>
      <div ng-if="disq.loggedInUsername">
        <form ng-submit="disq.createItem()">
          <h1>Create your Disqover</h1>
          <h3>Name</h3>
          <input type="text" ng-model="disq.name">
          <h3>Picture</h3>
          <input type="text" ng-model="disq.image">
          <h3>Age</h3>
          <input type="number" ng-model="disq.age">
          <h3>Bio</h3>
          <textarea ng-model="disq.bio" rows="8" cols="80">Enter your bio</textarea>
          <h4>Favorite Artists</h4>
          <input type="text" ng-model="disq.fav_artists">
          <h4>Favorite Movies</h4>
          <input type="text" ng-model="disq.fav_movies"><br>
          <input type="submit" value="Create!">
        </form>
      </div>
    </nav>
      <div class="container">
        <div ng-if="disq.loggedInUsername" ng-repeat="page in disq.items" class="item">
          <h2>{{page.name}}</h2>
          <img ng-src="{{page.image}}" alt="{{page.name}}">
          <h3>{{page.age}}</h3>
          <h4>{{page.bio}}</h4>
          <div ng-repeat="artist in page.fav_artists">
            <h4>{{artist}}</h4>
          </div>
          <div ng-repeat="movie in page.fav_movies">
            <h4>{{movie}}</h4>
          </div>
          <button ng-click="disq.deleteItem(page)" type="button">Delete your Disqover</button>
          <button ng-if="$index !== disq.indexOfEditFormToShow" href="#" ng-click="disq.indexOfEditFormToShow = $index">Edit Disqover</button>
          <form ng-if="$index === disq.indexOfEditFormToShow" ng-submit ="disq.editItem(page)">
            <h3>Name</h3>
            <input type="text" ng-model="disq.updatedName">
            <h3>Picture</h3>
            <input type="text" ng-model="disq.updatedImage">
            <h3>Age</h3>
            <input type="number" ng-model="disq.updatedAge">
            <h3>Bio</h3>
            <textarea ng-model="disq.updatedBio" rows="8" cols="80">Enter your bio</textarea>
            <h4>Favorite Artists</h4>
            <input type="text" ng-model="disq.updatedFav_artists">
            <h4>Favorite Movies</h4>
            <input type="text" ng-model="disq.updatedFav_movies"><br>
            <input type="submit" value="Save Changes" class="buttontwo">
          </form>
        </div>
      </div>
      <!--BEGIN SPOTIFY REQUEST -->
      <div ng-controller="spotifyController as spotify">
        <form ng-submit="spotify.getAlbum()">
          <input type="submit" value="Get Album">
        </form>
      </div>
      <!-- END SPOTIFY REQUEST -->
      <div class="searchArea">
        <div class="similar">
          <form ng-submit="disq.spotifyPost()">
            <h3>Search For </h3>
            <input type="text" ng-model="disq.artist">
              <!-- <h3>Similar To</h3>
              <input type="text" ng-model="disq.userInput"> -->
            <div>
              <input type="submit" value="Find Similar Results" class="buttonthree">
            </div>
          </form>
        </div>
      </div>
      <div ng-repeat="music in disq.music">
        <ul>
          <li>{{music.Name}}</li>
          <li>{{music.wTeaser}}</li>
          <li><a href="{{music.wUrl}}">Wikipedia</a></li>
          <li><a href="{{music.yUrl}}">Youtube</li>
        </ul>
      </div>
    </div>
    <footer>
        Made By J.A.M.
    </footer>
  </body>
</html>
